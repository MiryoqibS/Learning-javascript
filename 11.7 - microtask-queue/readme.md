# üì¶ –¢–µ–º–∞ 11.7 - –ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏

---

## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏

**–ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏** (microtasks) ‚Äî —ç—Ç–æ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞**, **–¥–æ –ª—é–±—ã—Ö –º–∞–∫—Ä–æ–∑–∞–¥–∞—á**, —Ç–∞–∫–∏—Ö –∫–∞–∫ `setTimeout`.

> üìå –ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `.then`, `catch`, `finally`, –∞ —Ç–∞–∫–∂–µ `queueMicrotask`.

---

## üîπ –ì–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏

–ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ —Ç–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö:

- `Promise.then(...)`
- `Promise.catch(...)`
- `Promise.finally(...)`
- `queueMicrotask(...)`

---

## üîπ –û—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á

–û—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á **–≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞**, –Ω–æ **–¥–æ —Å–ª–µ–¥—É—é—â–∏—Ö –º–∞–∫—Ä–æ–∑–∞–¥–∞—á**:

```javascript
console.log("1");

queueMicrotask(() => console.log("microtask"));

console.log("2");

// –í—ã–≤–æ–¥:
// 1
// 2
// microtask
```

---

## üîπ –ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–º–∏—Å–∞—Ö

```javascript
Promise.resolve()
  .then(() => console.log("A"))
  .then(() => console.log("B"));

console.log("C");

// –í—ã–≤–æ–¥:
// C
// A
// B
```

> üìå –ö–∞–∂–¥–æ–µ .then —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –º–∏–∫—Ä–æ–∑–∞–¥–∞—á—É. –û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ—ç—Ç–∞–ø–Ω–æ.

---

## üîπ –ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ vs –ú–∞–∫—Ä–æ–∑–∞–¥–∞—á–∏

```javascript
setTimeout(() => console.log("timeout"));

Promise.resolve().then(() => console.log("promise"));

console.log("sync");

// –í—ã–≤–æ–¥:
// sync
// promise
// timeout
```

> üìå setTimeout ‚Äî –º–∞–∫—Ä–æ–∑–∞–¥–∞—á–∞

`Promise.then` ‚Äî –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∞
–°–Ω–∞—á–∞–ª–∞ –≤–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥, –ø–æ—Ç–æ–º –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏, –ø–æ—Ç–æ–º –º–∞–∫—Ä–æ–∑–∞–¥–∞—á–∏.

---

## üîπ queueMicrotask

queueMicrotask ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é:

```javascript
queueMicrotask(() => {
  console.log("–≠—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, –Ω–æ –¥–æ setTimeout");
});
```

---

## üîπ `Event Loop` –≤ —Ü–µ–ª–æ–º

`Event Loop` ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π:

- –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥.

- –ó–∞—Ç–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á.

- –ó–∞—Ç–µ–º –±–µ—Ä—ë—Ç –æ–¥–Ω—É –º–∞–∫—Ä–æ–∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä setTimeout) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —à–∞–≥ 1.

> üìå –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç JavaScript –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è, –¥–∞–∂–µ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–æ–≤ –∏–ª–∏ —Å–æ–±—ã—Ç–∏–π.

--

## ‚ö†Ô∏è –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

- üî∏ –ú–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ ‚Äî –æ–Ω–∏ –≤—Å–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–æ –º–∞–∫—Ä–æ–∑–∞–¥–∞—á.

- üî∏ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç "–∑–∞—Å—Ç–æ–ø–æ—Ä–∏—Ç—å" Event Loop.

- üî∏ await –≤–Ω—É—Ç—Ä–∏ async —Ç–∞–∫–∂–µ —Å—Ç–∞–≤–∏—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥—å –º–∏–∫—Ä–æ–∑–∞–¥–∞—á.

---

## üí¨ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ç –º–µ–Ω—è

–Ø —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–æ–±—Ä–∞–ª—Å—è –≤ —Ç–µ–º–µ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á –∏ –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Event Loop.
–≠—Ç–∞ —Ç–µ–º–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏, –∞ –≤–æ–æ–±—â–µ –ø—Ä–æ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –∫–æ–¥–∞ –≤ JavaScript.
–í–∞–∂–Ω–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–Ω–∞—Ç—å –ø—Ä–æ –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏, –∞ –ø–æ–Ω–∏–º–∞—Ç—å –≤—Å—é –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π: –æ—á–µ—Ä–µ–¥—å, –º–∏–∫—Ä–æ–∑–∞–¥–∞—á–∏, –º–∞–∫—Ä–æ–∑–∞–¥–∞—á–∏, WebApi ‚Äî –≤—Å—ë —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —á–∞—Å—ã, –∏ –µ—Å–ª–∏ –ø–æ–Ω—è—Ç—å Event Loop, –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–≤–æ–¥–∞ –¥–∞–∂–µ –≤ —Å–∞–º—ã—Ö –∑–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö.

> ‚ùó –≠—Ç–∞ —Ç–µ–º–∞ ‚Äî —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ–∫–∞ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã.
