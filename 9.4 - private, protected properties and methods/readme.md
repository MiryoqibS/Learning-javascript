# 📦 Тема 9.4 - Приватные и защищённые свойства и методы

---

## 🔹 Что такое инкапсуляция?

**Инкапсуляция** — это принцип ООП, при котором внутреннее устройство объекта скрывается от внешнего мира. Позволяет:

- Защитить данные от случайного изменения
- Управлять доступом к свойствам/методам

---

## 🔹 Защищённые свойства _name

Считаются приватными по соглашению, но технически доступны.

```javascript
class User {
  constructor(name) {
    this._name = name; // 👈 защищённое по соглашению
  }

  sayHi() {
    console.log(`Привет, ${this._name}`);
  }
}

const user = new User("Miryoqib");
user.sayHi(); // Привет, Miryoqib
console.log(user._name); // Доступно! (не по-настоящему приватное)
```

> 📌 _ — просто соглашение. Это свойство не защищено технически.

---

## 🔹 Приватные свойства #name

Приватные свойства и методы начинаются с # и доступны только внутри класса.

```javascript
class User {
  #name;

  constructor(name) {
    this.#name = name;
  }

  sayHi() {
    console.log(`Привет, ${this.#name}`);
  }
}

const user = new User("Miryoqib");
user.sayHi(); // Привет, Miryoqib
console.log(user.#name); // ❌ Ошибка: приватное свойство!
```

> 📌 Такие свойства и методы невозможно прочитать или изменить снаружи

---

## 🔹 Приватные методы

Также можно создавать приватные методы с #:

```javascript
class User {
  #saySecret() {
    console.log("Секретное сообщение");
  }

  show() {
    this.#saySecret(); // ✅ Работает
  }
}

const user = new User();
user.show(); // Секретное сообщение
user.#saySecret(); // ❌ Ошибка
```

---

## 🔹 Проверка приватных полей

Для проверки можно использовать in:

```javascript
class User {
  #age = 14;
}

console.log(#age in new User()); // true
```

> 📌 Очень редкий синтаксис, почти не используется на практике

---

## ⚠️ Подводные камни

- Приватные свойства нельзя использовать вне класса — даже в наследниках!
- Защищённые свойства (`_name`) — не настоящая защита, просто соглашение
- Приватные поля не видны через `for...in`, `Object.keys()` и не сериализуются

---

## 🔹 Наследование и приватность

```javascript
class Animal {
  #type = "животное";

  getType() {
    return this.#type;
  }
}

class Dog extends Animal {
  getTypeAgain() {
    return this.#type; // ❌ Ошибка! Нет доступа к #type родителя
  }
}
```

> 📌 Приватность работает на уровне класса, а не иерархии!
